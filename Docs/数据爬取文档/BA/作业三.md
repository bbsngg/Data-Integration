# 数据源

​      作业三数据源分为两部分来源：一部分是其他组的数据，另一部分是来自[http://pycs.greedyai.com](http://pycs.greedyai.com/)的新增数据。由于更细节的基金和债券等信息需要在tushare上获取，而获取相应数据需要大量付费积分，因此无法将tushare作为新的数据源来获取数据。

# 获取方式

​      第一部分中包括另外两组的数据，直接通过联系其他组组长获取。

​      第二部分数据仍然通过scrapy进行爬取，爬取重点变为董事会相关信息，同时由于标签更加不具有特殊性，在定位数据位置时添加了对xpath表达式的使用。

​      具体而言是获取到董事会、监事会和高管面板的tbody标签，然后获取其下的所有tr元素。观察到每一行tr元素至少包含一位管理层成员信息，至多两位，用于存储信息的td标签以三个作为一组，因此直接通过索引值对特定的内容进行获取：

​      对于索引值x：若mod(x)=0，则获取字段为人名；若mod(x)=1，则获取字段为职位；若mod(x)=2，则获取字段为持有股数。

​      最后为了使得新的数据能够与原有数据产生关联，在每一行数据开头都加入了stock_no信息。

​      相较于参考demo的董事会信息数据，该部分还增量爬取了监事会和高管层的成员数据，也就是在公司高层成员数据方面更加完善，同时增加了数据源有提供的持股信息。对于回调函数的调用与传参处理与作业二相同。

# 关键代码

- 获取三个面板页面

![1593846588785](.\%5Ctypora-img%5C1593846588785.png)

- 获取字段信息

![1593846628900](.\%5Ctypora-img%5C1593846628900.png)